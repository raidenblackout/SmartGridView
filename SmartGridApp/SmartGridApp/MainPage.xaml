<Page x:Class="SmartGridApp.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:SmartGridApp"
      xmlns:controls="using:SmartGrid.Controls"
      xmlns:viewmodels="using:SmartGridApp"
      Background="White">
   <Grid Background="White">
      <Grid.RowDefinitions>
          <RowDefinition Height="*"/>
          <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>

      <controls:SmartGridView x:Name="GridControl" Grid.Row="0"
                              ItemsSource="{x:Bind ViewModel.Cards}" 
                              Background="Transparent">
          <controls:SmartGridView.ItemTemplate>
             <DataTemplate x:DataType="viewmodels:CardViewModel">
                    <Grid Background="LightGray" Margin="4" CornerRadius="4" MinWidth="100" MinHeight="100">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="{x:Bind DisplayIndex}" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <TextBlock Text="{x:Bind Title}" FontSize="12" Opacity="0.7" HorizontalAlignment="Center"/>
                        </StackPanel>
                         <Button Content="Expand" Command="{x:Bind RequestToggleCommand}" 
                                 VerticalAlignment="Bottom" HorizontalAlignment="Right"
                                 Margin="4"/>
                    </Grid>
             </DataTemplate>
          </controls:SmartGridView.ItemTemplate>
      </controls:SmartGridView>

      <!-- Interactive Debug Bar (High Contrast Dark Theme) -->
      <Border Grid.Row="1" Background="#1E1E1E" BorderBrush="#007ACC" BorderThickness="0,2,0,0" Padding="16,10">
          <Grid>
              <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto"/>
                  <ColumnDefinition Width="*"/>
                  <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>

              <StackPanel Orientation="Horizontal" Spacing="24">
                  <StackPanel Orientation="Horizontal" Spacing="12">
                      <TextBlock Text="Total Cards:" VerticalAlignment="Center" Foreground="#AAAAAA" FontSize="12"/>
                      <Slider Value="{x:Bind ViewModel.CardCount, Mode=TwoWay}" Minimum="0" Maximum="5000" Width="180" VerticalAlignment="Center"/>
                      <TextBlock Text="{x:Bind ViewModel.CardCount, Mode=OneWay}" VerticalAlignment="Center" Foreground="White" FontWeight="Bold" Width="45"/>
                  </StackPanel>
              </StackPanel>

              <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="28">
                  <StackPanel Orientation="Horizontal" Spacing="6">
                      <TextBlock Text="Mem Total:" Foreground="#888888" FontSize="11" VerticalAlignment="Center"/>
                      <TextBlock Text="{x:Bind ViewModel.Cards.Count, Mode=OneWay}" Foreground="#00E5FF" FontWeight="Bold" FontSize="14"/>
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                      <TextBlock Text="Visible:" Foreground="#888888" FontSize="11" VerticalAlignment="Center"/>
                      <TextBlock Text="{x:Bind GridControl.VisibleItemsCount, Mode=OneWay}" Foreground="#00E5FF" FontWeight="Bold" FontSize="14"/>
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                      <TextBlock Text="Range:" Foreground="#888888" FontSize="11" VerticalAlignment="Center"/>
                      <TextBlock Text="{x:Bind GridControl.VisibleRangeStart, Mode=OneWay}" Foreground="White" FontWeight="Bold" FontSize="13"/>
                      <TextBlock Text="→" Foreground="#444444"/>
                      <TextBlock Text="{x:Bind GridControl.VisibleRangeEnd, Mode=OneWay}" Foreground="White" FontWeight="Bold" FontSize="13"/>
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Spacing="6">
                      <TextBlock Text="Viewport:" Foreground="#888888" FontSize="11" VerticalAlignment="Center"/>
                      <TextBlock Text="{x:Bind GridControl.ViewportRectString, Mode=OneWay}" Foreground="#AAAAAA" FontSize="11" VerticalAlignment="Center"/>
                  </StackPanel>
              </StackPanel>
          </Grid>
      </Border>
   </Grid>
</Page>
